import { registerRoute } from 'workbox-routing';
import { precacheAndRoute } from 'workbox-precaching';
import { NetworkFirst, CacheFirst } from 'workbox-strategies';
import { ExpirationPlugin } from 'workbox-expiration';

// Precache and route the static assets generated by your build process
precacheAndRoute(self.__WB_MANIFEST);

// Cache the API responses using the Network First strategy
registerRoute(
    // Replace 'YOUR_API_ENDPOINT' with the actual URL of your API
    new RegExp('^YOUR_API_ENDPOINT'),
    new NetworkFirst({
        cacheName: 'api-cache',
        plugins: [
            new ExpirationPlugin({
                maxAgeSeconds: 60 * 60 * 24, // Cache for 24 hours
                purgeOnQuotaError: true, // Automatically clean up if quota is exceeded
            }),
        ],
    })
);

// Cache the images using the Cache First strategy
registerRoute(
    /\.(?:png|jpg|jpeg|gif|svg)$/,
    new CacheFirst({
        cacheName: 'image-cache',
        plugins: [
            new ExpirationPlugin({
                maxEntries: 50, // Cache up to 50 images
                maxAgeSeconds: 60 * 60 * 24 * 30, // Cache for 30 days
                purgeOnQuotaError: true, // Automatically clean up if quota is exceeded
            }),
        ],
    })
);

// Customize this part to fit your specific caching needs
// For example, you can cache specific pages or assets using routes and strategies

// For more advanced configuration options, refer to the Workbox documentation:
// https://developers.google.com/web/tools/workbox

// ... Add more routes and strategies as needed
